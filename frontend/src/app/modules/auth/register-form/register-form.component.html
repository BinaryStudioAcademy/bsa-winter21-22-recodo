<div class="registration-container">
    <img src="../../../../assets/icons/logo.svg" alt="logo" />
    <div class="to-login-container">
        <h2>Create an account</h2>
        <p class="already-registered">
            Already registered? 
            <button routerLink="/login">
                <span> Log in</span>
            </button>
        </p>
    </div>
    <form class="registration-form" [formGroup]="registerForm" action="" (submit)="registerUser()">
        <p class="input-label">Workspace name</p>
        <mat-form-field class="input-form" appearance="fill" floatLabel="always" hideRequiredMarker="true">
            <input matInput placeholder="Name" formControlName="workspaceName" id="workspaceName">
        </mat-form-field>
        <div class="errors">
            <small *ngIf=" registerForm.controls['workspaceName'].touched && registerForm.controls['workspaceName'].errors && registerForm.controls['workspaceName'].errors['required']">
                Workspace is a required property
            </small>
            <small *ngIf=" registerForm.controls['workspaceName'].touched && registerForm.controls['workspaceName'].errors && registerForm.controls['workspaceName'].errors['minlength']">
                Workspace must be at least 3 characters long
            </small>
            <small *ngIf=" registerForm.controls['workspaceName'].touched && registerForm.controls['workspaceName'].errors && registerForm.controls['workspaceName'].errors['maxlength']">
                Workspace must be no more than 30 characters long
            </small>
        </div>

        <p class="input-label">Email</p>
        <mat-form-field class="input-form" appearance="fill" floatLabel="never" hideRequiredMarker="true">
            <input type="email" matInput placeholder="user@gmail.com" formControlName="email">
        </mat-form-field>
        <div class="errors">
            <small *ngIf=" registerForm.controls['email'].touched && registerForm.controls['email'].errors && registerForm.controls['email'].errors['required']">
                Email is a required property
            </small>
            <small *ngIf=" registerForm.controls['email'].touched && registerForm.controls['email'].errors && registerForm.controls['email'].errors['pattern']">
                Invalid email
            </small>
        </div>

        <p class="input-label">Password</p>
        <mat-form-field class="input-form" appearance="fill" hideRequiredMarker="true">
            <input [type]="hidePass ? 'password' : 'text'" matInput minlength="8" placeholder="password"
                formControlName="password">
            <mat-icon class="password-icon" matSuffix (click)="hidePass = !hidePass">{{hidePass ? 'visibility' :
                'visibility_off'}}
            </mat-icon>
        </mat-form-field>
        <div class="errors">
            <small *ngIf=" registerForm.controls['password'].touched && registerForm.controls['password'].errors && registerForm.controls['password'].errors['required']">
                Password is a required property
            </small>
            <small *ngIf=" registerForm.controls['password'].touched && registerForm.controls['password'].errors && 
            ( registerForm.controls['password'].errors['pattern'] || 
              registerForm.controls['password'].errors['minlength'] ||
              registerForm.controls['password'].errors['maxlength'] )">
                At least 1 digit, at least 1 letter, 8-20 characters
            </small>
        </div>

        <p class="input-label">Repeat Password</p>
        <mat-form-field class="input-form" appearance="fill" hideRequiredMarker="true">
            <input [type]="hideConfirmPass ? 'password' : 'text'" matInput minlength="8" placeholder="confirm password"
                formControlName="confirmPassword">
            <mat-icon class="password-icon" matSuffix (click)="hideConfirmPass = !hideConfirmPass">{{hideConfirmPass ? 'visibility' :
                'visibility_off'}}
            </mat-icon>
        </mat-form-field>
        <div class="errors">
            <small *ngIf=" registerForm.controls['confirmPassword'].touched && registerForm.controls['confirmPassword'].errors && registerForm.controls['confirmPassword'].errors['required']">
                Confirm password is a required property
            </small>
            <small *ngIf=" registerForm.controls['confirmPassword'].touched && registerForm.controls['confirmPassword'].errors && registerForm.controls['confirmPassword'].errors['passwordMatchValidator']">
                Passwords do not match
            </small>
        </div>

        <div class="registation-buttons">
            <button class="submit-button" mat-button type="submit" [disabled]="!registerForm.valid">
                Sign Up
            </button>
            <p>
                Or sign up with
            </p>
            <button class="login-with-button">
                <img src="../../../../assets/icons/googleButton.svg" alt="google">
            </button>
        </div>
    </form>
</div>